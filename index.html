<!DOCTYPE html> 
<html lang="zh-CN"> 
<head> 
 <meta charset="UTF-8"> 
 <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
 <title>失物找回平台 - 永慕智创软件工作室（永慕科技）</title> 
 <style> 
 * { 
 margin: 0; 
 padding: 0; 
 box-sizing: border-box; 
 font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; 
 } 
 
 body { 
 background-color: #f5f5f5; 
 color: #333; 
 line-height: 1.6; 
 padding: 20px; 
 max-width: 800px; 
 margin: 0 auto; 
 } 
 
 .container { 
 background-color: #fff; 
 border-radius: 10px; 
 box-shadow: 0 0 20px rgba(0, 0, 0, 0.1); 
 padding: 30px; 
 margin-top: 20px; 
 } 
 
 h1 { 
 color: #1a73e8; 
 text-align: center; 
 margin-bottom: 30px; 
 font-size: 24px; 
 } 
 
 .notice { 
 background-color: #fff8e1; 
 border-left: 4px solid #ffc107; 
 padding: 15px; 
 margin-bottom: 20px; 
 font-size: 14px; 
 } 
 
 .contact-info { 
 margin-bottom: 30px; 
 } 
 
 .contact-item { 
 display: flex; 
 align-items: center; 
 margin-bottom: 15px; 
 } 
 
 .contact-icon { 
 width: 40px; 
 height: 40px; 
 background-color: #1a73e8; 
 border-radius: 50%; 
 display: flex; 
 align-items: center; 
 justify-content: center; 
 color: white; 
 margin-right: 15px; 
 font-size: 20px; 
 } 
 
 .contact-detail { 
 flex: 1; 
 } 
 
 .contact-detail h3 { 
 color: #1a73e8; 
 margin-bottom: 5px; 
 font-size: 16px; 
 } 
 
 .contact-detail p { 
 color: #666; 
 font-size: 14px; 
 } 
 
 .warning { 
 background-color: #ffebee; 
 border-left: 4px solid #f44336; 
 padding: 15px; 
 margin-bottom: 20px; 
 font-size: 14px; 
 } 
 
 .footer { 
 text-align: center; 
 margin-top: 30px; 
 font-size: 12px; 
 color: #999; 
 } 
 
 .location-display { 
 margin-top: 20px; 
 padding: 15px; 
 background-color: #e8f5e9; 
 border-left: 4px solid #4caf50; 
 font-size: 14px; 
 } 
 
 @media (max-width: 600px) { 
 .container { 
 padding: 20px; 
 } 
 
 h1 { 
 font-size: 20px; 
 } 
 } 
 </style> 
</head> 
<body> 
 <div class="container"> 
 <h1>永慕智创软件工作室（永慕科技）失物找回平台</h1> 
 
 <div class="notice"> 
 您进入此网页说明您拾取到并扫描带有由永慕智创软件工作室（永慕科技）提供失物找回服务的二维码。<br> 
 该平台提供了失主的联系方式，为方便您联系，也为更好确定您的位置进而让失主知晓失物已被人拾取，故需获取您的位置信息并上传至后台，请悉知！<br> 
⚠️第一次进入平台，将会弹窗申请获取位置信息，请手动点击允许！ <br> 
【请提前打开手机定位服务开关，根据中华人民共和国相关法律规定：您的个人隐私数据将在失物找回后永久删除，不做任何备份。】 
 </div> 
 
 <div class="contact-info"> 
 <h2>失主联系方式</h2> 
 <div class="contact-item"> 
 <div class="contact-icon">📱</div> 
 <div class="contact-detail"> 
 <h3>联系电话</h3> 
 <p>18788430982</p> 
 </div> 
 </div> 
 <div class="contact-item"> 
 <div class="contact-icon">✉️</div> 
 <div class="contact-detail"> 
 <h3>电子邮箱</h3> 
 <p>liliuhang1124@outlook.com</p> 
 </div> 
 </div> 
 <div class="contact-item"> 
 <div class="contact-icon">💬</div> 
 <div class="contact-detail"> 
 <h3>代理负责人微信</h3> 
 <p>ymkj_weixin</p> 
 </div> 
 </div> 
 </div> 
 
<div class="warning"> 
 <h3>重要警示</h3> 
 <p>⚠️位置信息将被记录上传到后台，请及时联系失主归还物品！</p> 
 <p>【如您在扫码识别进入此平台后未及时联系失主，失主可根据相关信息至所在地公安机关报案，由此带来的后果将由您自行承担！】</p> 
 <p>根据中华人民共和国相关法律规定：您的个人隐私数据将在失物找回后永久删除，不做任何备份。</p> 
 </div> 
 
 <div class="location-display" id="location-info" style="display: none;"> 
 <h3>位置信息</h3> 
 <p>您的位置信息：<span id="user-location">正在获取位置...</span></p> 
 <p>详细地址：<span id="user-address">正在获取详细地址...</span></p> 
 <p>我们已记录此信息并通知失主，烦请您通过以上联系方式联系失主。</p> 
 <p>❗请确认已开启手机定位服务，第一次进入平台，将会弹窗申请获取位置信息，请确定已点击允许！【请使用微信扫一扫功能进入平台，其他应用可能导致位置信息获取失败】</p> 
 <p>⚠️如果位置信息获取失败，通知邮件仍会发送，请您通过上方联系方式联系失主归还失物！</p> 
 </div> 
 
 <div class="footer"> 
 建设运营：永慕智创软件工作室（永慕科技）<div>技术支持：高德地图、阿里云 
 </div> 
 </div> 
 
<div id="container"></div> 
<script type="text/javascript"> 
 window._AMapSecurityConfig = { 
 securityJsCode: "6655b8ddcef38eb7dcfc6b4ec649cedd", 
 };//如您非永慕智创软件工作室（永慕科技）员工，严禁滥用securityJsCode，否则将负法律责任！ 
</script> 
<script 
 type="text/javascript" 
 src="https://webapi.amap.com/maps?v=2.0&key=197ddb697c7ee953ddd1e0472d95b201" 
></script> 
<script type="text/javascript"> 
 var map = new AMap.Map("container", { 
 zoom: 12, 
 }); 
</script> 
<script> 
 // 显示初始弹窗提示 
 alert("您进入此网页说明您拾取到并扫描带有由永慕智创软件工作室（永慕科技）提供失物找回服务的二维码。\n该平台提供了失主的联系方式，为方便您联系，也为更好确定您的位置进而让失主知晓失物已被人拾取，故需获取您的位置信息并上传至后台，请悉知！\n⚠️第一次进入平台，将会弹窗申请获取位置信息，请手动点击允许！ \n\n【根据中华人民共和国相关法律规定：您的个人隐私数据将在失物找回后永久删除，不做任何备份。】"); 
 
 // 第一次确认定位服务 
 if (!confirm("【第一次提醒】\n请确定已打开手机定位服务，确保正确获取所需信息。^[1]^\n确认打开手机定位服务后再点击确定！")) { 
 alert("🛑因您点击了“取消”，网页进程运行已终止，请开启定位服务后刷新页面重试！"); 
 throw new Error("定位服务未开启"); 
 } 
 
 // 第二次确认定位服务 
 if (!confirm("【第二次提醒】\n请再次确认：请确保已打开手机定位服务。^[2]^ \n点击确定继续获取位置信息。^[3]^ \n⚠️第一次进入本网站，将会弹窗申请获取位置信息，请手动点击允许！ ")) { 
 alert("🛑因您点击了“取消”，网页进程运行已终止，请开启定位服务后刷新页面重试！"); 
 throw new Error("定位服务未确认开启"); 
 } 
 
 // 使用高德地图API获取位置信息和详细地址 
 function getAMapLocationAndAddress(callback) { 
 return new Promise((resolve, reject) => { 
 // 设置20秒超时 
 const timeout = setTimeout(() => { 
 reject(new Error('获取位置信息超时')); 
 }, 20000); 
 
 AMap.plugin('AMap.Geolocation', function() { 
 const geolocation = new AMap.Geolocation({ 
 enableHighAccuracy: true, 
 timeout: 50, 
 position: 'RB' 
 }); 
 
 geolocation.getCurrentPosition(function(status, result) { 
 clearTimeout(timeout); 
 
 if (status === 'complete') { 
 const { position } = result; 
 const locationStr = `纬度: ${position.lat}, 经度: ${position.lng}`; 
 
 // 使用高德地图反向地理编码API获取详细地址 
 AMap.plugin('AMap.Geocoder', function() { 
 const geocoder = new AMap.Geocoder({ 
 radius: 1000, // 设置查询范围，单位米 
 extensions: "all" // 返回地址描述和行政区划信息 
 }); 
 
 geocoder.getAddress(position, function(status, result) { 
 if (status === 'complete' && result.regeocode) { 
 const address = result.regeocode.formattedAddress; 
 callback(locationStr, address); 
 resolve({ location: locationStr, address: address }); 
 } else { 
 console.error('获取详细地址失败:', result.message); 
 callback(locationStr, '无法获取详细地址'); 
 reject(new Error(result.message)); 
 } 
 }); 
 }); 
 } else { 
 console.error('高德地图获取位置失败:', result.message); 
 callback('无法获取精确位置信息', '无法获取详细地址'); 
 reject(new Error(result.message)); 
 } 
 }); 
 }); 
 }); 
 } 
 
 // 发送短信到阿里云（使用fetch调用阿里云短信API） 
 async function sendSMSToAliyun(phoneNumber, templateCode, user_nick, time, address) { 
 try { 
 const templateParam = JSON.stringify({ 
 'user_nick': user_nick, 
 'time': time, 
 'address': address 
 }); 
 
 const response = await fetch('https://dysmsapi.aliyuncs.com/', { 
 method: 'POST', 
 headers: { 
 'Content-Type': 'application/x-www-form-urlencoded', 
 }, 
 body: new URLSearchParams({ 
 'PhoneNumbers': phoneNumber, 
 'SignName': '永慕智创软件', 
 'TemplateCode': templateCode, 
 'TemplateParam': templateParam 
 }) 
 }); 
 
 if (!response.ok) { 
 throw new Error('阿里云短信API请求失败'); 
 } 
 console.log('短信已发送到阿里云'); 
 } catch (error) { 
 console.error('发送短信到阿里云失败:', error); 
 } 
 } 
 
 // 页面加载时执行 
 document.addEventListener('DOMContentLoaded', function() { 
 // 假设失物名称和时间 
 const lostItemName = '充电宝'; 
 const currentTime = new Date().toLocaleString(); 
 
 // 0秒后获取位置信息和详细地址 
 setTimeout(() => { 
 getAMapLocationAndAddress((location, address) => { 
 document.getElementById('user-location').textContent = location; 
 document.getElementById('user-address').textContent = address; 
 document.getElementById('location-info').style.display = 'block'; 
 
 // 发送短信到阿里云 
 sendSMSToAliyun('18788430982', 'SMS_495690056', lostItemName, currentTime, address); 
 }).catch(error => { 
 console.error('获取位置信息或详细地址失败:', error); 
 document.getElementById('user-location').textContent = '获取位置信息失败'; 
 document.getElementById('user-address').textContent = '获取详细地址失败'; 
 document.getElementById('location-info').style.display = 'block'; 
 }); 
 }, 0); 
 }); 
 </script> 
</body> 
</html>